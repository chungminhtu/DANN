<script type="text/javascript">
    var control1 = null;


    //Tự động focus vào item mới thêm vào để nhập nhanh dữ liệu
    function GridEndCallback(s, e) {
        if (ctree.IsEditing()) {
            ctree.FocusEditor(0);
        }
    }

    //Kích đúp thì sẽ edit row trực tiếp
    function Grid1DoubleClick (s, e) {
        control1.StartEditRow(control1.GetFocusedRowIndex());
    }

    //Tự động lưu sau khi focus sang nút khác
    //function GridFocusedChanged(s, e) {
    //    var editor0 = "#" + ctree.name + "_DXEDITOR0_I";
    //    var editor1 = "#" + ctree.name + "_DXEDITOR1_I";

    //    if ($(editor0).val() == "" && $(editor1).val() == "") {
    //        ctree.CancelEdit();
    //    }
    //    else {
    //        ctree.UpdateEdit();
    //    }
    //}

</script>

@Html.DevExpress().Panel(panelButton =>
        {
            panelButton.Name = "PanelGridCommand1";
            panelButton.FixedPosition = PanelFixedPosition.None;
            panelButton.SettingsCollapsing.ExpandEffect = PanelExpandEffect.Auto;

            panelButton.SetContent(() =>
            {
                Html.DevExpress().Button(
                    myButton =>
                    {
                        myButton.Name = "btnThemMoi1";
                        myButton.Text = "Thêm";
                        myButton.ControlStyle.Border.BorderWidth = Unit.Pixel(0);
                        myButton.Images.Image.Url = "~/Content/icon/16/Add_16x16.png";
                        myButton.ClientSideEvents.Click = "function(s, e) { control1.AddNewRow(); }";
                        //myButton.Enabled = !ReferenceEquals(Session["ID_BenhNhan"], "");
                        myButton.Style[HtmlTextWriterStyle.MarginLeft] = "5px";
                    }).GetHtml();
                Html.DevExpress().Button(
                        myButton =>
                        {
                            myButton.Name = "btnSua1";
                            myButton.Text = "Sửa";
                            myButton.ControlStyle.Border.BorderWidth = Unit.Pixel(0);
                            myButton.Images.Image.Url = "~/Content/icon/16/Edit_16x16.png";
                            myButton.ClientSideEvents.Click = "function( ) { control1.StartEditRow(control1.GetFocusedRowIndex()); }";
                            //myButton.Enabled = !ReferenceEquals(Session["ID_BenhNhan"], "");
                            myButton.Style[HtmlTextWriterStyle.MarginLeft] = "5px";
                        }).GetHtml();
                Html.DevExpress().Button(
                        myButton =>
                        {
                            myButton.Name = "btnXoa1";
                            myButton.Text = "Xóa";
                            myButton.ControlStyle.Border.BorderWidth = Unit.Pixel(0);
                            myButton.Images.Image.Url = "~/Content/icon/16/Close_16x16.png";
                            myButton.ClientSideEvents.Click = "function( ) { if(confirm('Bạn có chắc chắn xóa dữ liệu này không?')) control1.DeleteRow(control1.GetFocusedRowIndex()); }";
                            myButton.Enabled = !ReferenceEquals(Session["ID_BenhNhan"], "");
                            myButton.Style[HtmlTextWriterStyle.MarginLeft] = "5px";
                        }).GetHtml();
                Html.DevExpress().Button(
                        myButton =>
                        {
                            myButton.Name = "btnLuu1";
                            myButton.Text = "Lưu";
                            myButton.ControlStyle.Border.BorderWidth = Unit.Pixel(0);
                            myButton.Images.Image.Url = "~/Content/icon/16/SaveAll_16x16.png";
                            myButton.ClientSideEvents.Click = "function( ) { control1.UpdateEdit(); }";
                            myButton.Enabled = !ReferenceEquals(Session["ID_BenhNhan"], "");
                            myButton.Style[HtmlTextWriterStyle.MarginLeft] = "5px";
                        }).GetHtml();
                Html.DevExpress().Button(
                        myButton =>
                        {
                            myButton.Name = "btnHuy1";
                            myButton.Text = "Hủy";
                            myButton.ControlStyle.Border.BorderWidth = Unit.Pixel(0);
                            myButton.Images.Image.Url = "~/Content/icon/16/Reset2_16x16.png";
                            myButton.ClientSideEvents.Click = "function( ) { control1.CancelEdit();  }";
                            myButton.Enabled = !ReferenceEquals(Session["ID_BenhNhan"], "");
                            myButton.Style[HtmlTextWriterStyle.MarginLeft] = "5px";
                        }).GetHtml();
            });
        }).GetHtml()
